<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>نظام مبيعات عام (نسخة محلية)</title>
  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>body{font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}</style>
</head>
<body class="bg-slate-50 min-h-screen p-4">
  <div class="max-w-6xl mx-auto">
    <header class="flex items-center justify-between mb-4">
      <h1 class="text-2xl font-semibold">نظام مبيعات عام</h1>
      <div class="text-sm text-slate-600">نسخة محلية - تشتغل بفتح الملف في المتصفح</div>
    </header>

    <main class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <!-- Sidebar -->
      <aside class="md:col-span-1 bg-white p-4 rounded-lg shadow-sm">
        <h2 class="font-medium mb-2">أقسام</h2>
        <nav class="space-y-2 text-right text-sm">
          <button data-view="dashboard" class="view-btn w-full text-right px-3 py-2 rounded hover:bg-slate-50">لوحة القيادة</button>
          <button data-view="products" class="view-btn w-full text-right px-3 py-2 rounded hover:bg-slate-50">المنتجات</button>
          <button data-view="customers" class="view-btn w-full text-right px-3 py-2 rounded hover:bg-slate-50">العملاء</button>
          <button data-view="sales" class="view-btn w-full text-right px-3 py-2 rounded hover:bg-slate-50">فواتير ومبيعات</button>
          <button data-view="reports" class="view-btn w-full text-right px-3 py-2 rounded hover:bg-slate-50">تقارير</button>
        </nav>
        <hr class="my-3" />
        <div class="text-xs text-slate-500">حفظ تلقائي في التخزين المحلي (LocalStorage). يمكنك تصدير/استيراد البيانات.</div>
        <div class="mt-3 space-y-2">
          <button id="exportBtn" class="w-full text-xs bg-slate-800 text-white px-3 py-2 rounded">تصدير (JSON)</button>
          <button id="importBtn" class="w-full text-xs bg-green-600 text-white px-3 py-2 rounded">استيراد (JSON)</button>
          <input id="fileInput" type="file" accept="application/json" class="hidden" />
        </div>
      </aside>

      <!-- Content -->
      <section class="md:col-span-2">
        <div id="contentArea" class="bg-white p-4 rounded-lg shadow-sm min-h-[480px]">
          <!-- Views injected by JS -->
        </div>
      </section>
    </main>

    <footer class="mt-6 text-center text-xs text-slate-500">بُني كنموذج تعليمي. إن احتجت قاعدة بيانات حقيقية أو تسجيل دخول، يمكنني توسيعه.</footer>
  </div>

<script>
// ===== بيانات افتراضية وادوات مساعدة =====
const STORAGE_KEY = 'simple_sales_system_v1';
let state = {
  products: [],
  customers: [],
  invoices: [],
};

function uid(prefix='id'){
  return prefix + '_' + Date.now().toString(36) + Math.random().toString(36).slice(2,8);
}

function saveState(){
  localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
}
function loadState(){
  const raw = localStorage.getItem(STORAGE_KEY);
  if(raw) try{ state = JSON.parse(raw);}catch(e){ console.error(e); }
}

// ==== عناصر الواجهة وتبديل المشاهد ====
const contentArea = document.getElementById('contentArea');
function setView(name){
  document.querySelectorAll('.view-btn').forEach(b=> b.classList.remove('bg-slate-100'));
  document.querySelectorAll(`.view-btn[data-view='${name}']`).forEach(b=> b.classList.add('bg-slate-100'));
  if(name === 'dashboard') renderDashboard();
  if(name === 'products') renderProducts();
  if(name === 'customers') renderCustomers();
  if(name === 'sales') renderSales();
  if(name === 'reports') renderReports();
}

document.querySelectorAll('.view-btn').forEach(b=> b.addEventListener('click', ()=> setView(b.dataset.view)));

// ========== لوحة القيادة ==========
function renderDashboard(){
  const totalSales = state.invoices.reduce((s,inv)=> s + inv.total, 0);
  const totalInvoices = state.invoices.length;
  const totalProducts = state.products.length;
  const totalCustomers = state.customers.length;

  contentArea.innerHTML = `
    <h2 class="text-xl font-medium mb-3">لوحة القيادة</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
      <div class="p-3 bg-indigo-50 rounded shadow-sm text-right">
        <div class="text-sm text-slate-600">إجمالي المبيعات</div>
        <div class="text-2xl font-semibold">${totalSales.toFixed(2)}</div>
      </div>
      <div class="p-3 bg-emerald-50 rounded shadow-sm text-right">
        <div class="text-sm text-slate-600">عدد الفواتير</div>
        <div class="text-2xl font-semibold">${totalInvoices}</div>
      </div>
      <div class="p-3 bg-yellow-50 rounded shadow-sm text-right">
        <div class="text-sm text-slate-600">عدد المنتجات</div>
        <div class="text-2xl font-semibold">${totalProducts}</div>
      </div>
      <div class="p-3 bg-sky-50 rounded shadow-sm text-right">
        <div class="text-sm text-slate-600">عدد العملاء</div>
        <div class="text-2xl font-semibold">${totalCustomers}</div>
      </div>
    </div>

    <div class="mt-4">
      <h3 class="font-medium mb-2">آخر 5 فواتير</h3>
      <div class="space-y-2">${state.invoices.slice(-5).reverse().map(inv=>`
        <div class=\"p-2 border rounded text-sm flex justify-between\"><div>فاتورة ${inv.number} — ${inv.customerName || 'عميل نقدي'}</div><div>${inv.total.toFixed(2)}</div></div>
      `).join('')}
      </div>
    </div>
  `;
}

// ========== إدارة المنتجات ==========
function renderProducts(){
  contentArea.innerHTML = `
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-xl font-medium">المنتجات</h2>
      <button id="addProductBtn" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">إضافة منتج</button>
    </div>
    <div class="mb-3">
      <input id="productSearch" placeholder="ابحث باسم المنتج أو الكود" class="w-full p-2 border rounded text-right text-sm" />
    </div>
    <div id="productsList" class="space-y-2 text-right"></div>
  `;
  document.getElementById('addProductBtn').addEventListener('click', ()=> openProductModal());
  document.getElementById('productSearch').addEventListener('input', renderProductsList);
  renderProductsList();
}

function renderProductsList(){
  const q = document.getElementById('productSearch').value.trim().toLowerCase();
  const list = state.products.filter(p=> p.name.toLowerCase().includes(q) || (p.code||'').toLowerCase().includes(q));
  const container = document.getElementById('productsList');
  if(list.length===0){ container.innerHTML = '<div class="p-3 text-slate-500">لا توجد منتجات</div>'; return; }
  container.innerHTML = list.map(p=>`
    <div class="p-3 border rounded flex justify-between items-center">
      <div class="text-right">
        <div class="font-medium">${p.name}</div>
        <div class="text-xs text-slate-500">كود: ${p.code || '-'} — سعر افتراضي: ${p.price.toFixed(2)}</div>
      </div>
      <div class="flex gap-2">
        <button class="edit-product btn" data-id="${p.id}">تعديل</button>
        <button class="delete-product btn" data-id="${p.id}">حذف</button>
      </div>
    </div>
  `).join('');
  container.querySelectorAll('.edit-product').forEach(b=> b.addEventListener('click', e=> openProductModal(e.target.dataset.id)));
  container.querySelectorAll('.delete-product').forEach(b=> b.addEventListener('click', e=> { if(confirm('حذف المنتج؟')){ deleteProduct(e.target.dataset.id); }}));
}

function openProductModal(id=null){
  const product = id ? state.products.find(p=>p.id===id) : {id:null,name:'',code:'',price:0,notes:''};
  const html = `
    <div class="fixed inset-0 bg-black/30 flex items-center justify-center z-50">
      <div class="bg-white p-4 rounded w-full max-w-lg text-right">
        <h3 class="font-medium mb-2">${product.id ? 'تعديل' : 'إضافة'} منتج</h3>
        <div class="space-y-2">
          <input id="p_name" placeholder="الاسم" class="w-full p-2 border rounded text-right" value="${escapeHtml(product.name)}" />
          <input id="p_code" placeholder="كود (اختياري)" class="w-full p-2 border rounded text-right" value="${escapeHtml(product.code)}" />
          <input id="p_price" type="number" step="0.01" placeholder="السعر" class="w-full p-2 border rounded text-right" value="${product.price}" />
          <textarea id="p_notes" placeholder="ملاحظات" class="w-full p-2 border rounded text-right">${escapeHtml(product.notes||'')}</textarea>
        </div>
        <div class="mt-3 flex justify-between">
          <div>
            <button id="saveP" class="bg-blue-600 text-white px-3 py-1 rounded">حفظ</button>
            <button id="cancelP" class="px-3 py-1 rounded">إغلاق</button>
          </div>
        </div>
      </div>
    </div>
  `;
  const wrapper = document.createElement('div'); wrapper.innerHTML = html; document.body.appendChild(wrapper);
  document.getElementById('cancelP').addEventListener('click', ()=> wrapper.remove());
  document.getElementById('saveP').addEventListener('click', ()=>{
    const name = document.getElementById('p_name').value.trim();
    if(!name){ alert('ادخل اسم المنتج'); return; }
    const code = document.getElementById('p_code').value.trim();
    const price = parseFloat(document.getElementById('p_price').value) || 0;
    const notes = document.getElementById('p_notes').value.trim();
    if(product.id){
      const idx = state.products.findIndex(x=>x.id===product.id);
      state.products[idx] = {...state.products[idx], name, code, price, notes};
    } else {
      state.products.push({id: uid('prod'), name, code, price, notes});
    }
    saveState(); renderProductsList(); wrapper.remove();
  });
}
function deleteProduct(id){ state.products = state.products.filter(p=>p.id!==id); saveState(); renderProductsList(); }

// ========== العملاء ==========
function renderCustomers(){
  contentArea.innerHTML = `
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-xl font-medium">العملاء</h2>
      <button id="addCustomerBtn" class="bg-blue-600 text-white px-3 py-1 rounded text-sm">إضافة عميل</button>
    </div>
    <div class="mb-3">
      <input id="customerSearch" placeholder="ابحث بالاسم أو الهاتف" class="w-full p-2 border rounded text-right text-sm" />
    </div>
    <div id="customersList" class="space-y-2 text-right"></div>
  `;
  document.getElementById('addCustomerBtn').addEventListener('click', ()=> openCustomerModal());
  document.getElementById('customerSearch').addEventListener('input', renderCustomersList);
  renderCustomersList();
}
function renderCustomersList(){
  const q = document.getElementById('customerSearch').value.trim().toLowerCase();
  const list = state.customers.filter(c=> c.name.toLowerCase().includes(q) || (c.phone||'').includes(q));
  const container = document.getElementById('customersList');
  if(list.length===0){ container.innerHTML = '<div class="p-3 text-slate-500">لا يوجد عملاء</div>'; return; }
  container.innerHTML = list.map(c=>`
    <div class="p-3 border rounded flex justify-between items-center">
      <div class="text-right">
        <div class="font-medium">${c.name}</div>
        <div class="text-xs text-slate-500">${c.phone || '-'} — ${c.email || '-'}</div>
      </div>
      <div class="flex gap-2">
        <button class="edit-customer btn" data-id="${c.id}">تعديل</button>
        <button class="delete-customer btn" data-id="${c.id}">حذف</button>
      </div>
    </div>
  `).join('');
  container.querySelectorAll('.edit-customer').forEach(b=> b.addEventListener('click', e=> openCustomerModal(e.target.dataset.id)));
  container.querySelectorAll('.delete-customer').forEach(b=> b.addEventListener('click', e=> { if(confirm('حذف العميل؟')){ deleteCustomer(e.target.dataset.id); }}));
}
function openCustomerModal(id=null){
  const c = id ? state.customers.find(x=>x.id===id) : {id:null,name:'',phone:'',email:'',notes:''};
  const html = `
    <div class="fixed inset-0 bg-black/30 flex items-center justify-center z-50">
      <div class="bg-white p-4 rounded w-full max-w-lg text-right">
        <h3 class="font-medium mb-2">${c.id ? 'تعديل' : 'إضافة'} عميل</h3>
        <div class="space-y-2">
          <input id="c_name" placeholder="الاسم" class="w-full p-2 border rounded text-right" value="${escapeHtml(c.name)}" />
          <input id="c_phone" placeholder="الهاتف" class="w-full p-2 border rounded text-right" value="${escapeHtml(c.phone)}" />
          <input id="c_email" placeholder="البريد الإلكتروني" class="w-full p-2 border rounded text-right" value="${escapeHtml(c.email)}" />
          <textarea id="c_notes" placeholder="ملاحظات" class="w-full p-2 border rounded text-right">${escapeHtml(c.notes||'')}</textarea>
        </div>
        <div class="mt-3 flex justify-between">
          <div>
            <button id="saveC" class="bg-blue-600 text-white px-3 py-1 rounded">حفظ</button>
            <button id="cancelC" class="px-3 py-1 rounded">إغلاق</button>
          </div>
        </div>
      </div>
    </div>
  `;
  const wrapper = document.createElement('div'); wrapper.innerHTML = html; document.body.appendChild(wrapper);
  document.getElementById('cancelC').addEventListener('click', ()=> wrapper.remove());
  document.getElementById('saveC').addEventListener('click', ()=>{
    const name = document.getElementById('c_name').value.trim(); if(!name){ alert('ادخل اسم العميل'); return; }
    const phone = document.getElementById('c_phone').value.trim();
    const email = document.getElementById('c_email').value.trim();
    const notes = document.getElementById('c_notes').value.trim();
    if(c.id){
      const idx = state.customers.findIndex(x=>x.id===c.id);
      state.customers[idx] = {...state.customers[idx], name, phone, email, notes};
    } else {
      state.customers.push({id: uid('cust'), name, phone, email, notes});
    }
    saveState(); renderCustomersList(); wrapper.remove();
  });
}
function deleteCustomer(id){ state.customers = state.customers.filter(c=>c.id!==id); saveState(); renderCustomersList(); }

// ========== فواتير ومبيعات ==========
function renderSales(){
  contentArea.innerHTML = `
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-xl font-medium">فواتير ومبيعات</h2>
      <div class="flex gap-2">
        <button id="newInvoiceBtn" class="bg-green-600 text-white px-3 py-1 rounded">فاتورة جديدة</button>
      </div>
    </div>
    <div class="mb-3">
      <input id="invoiceSearch" placeholder="ابحث برقم الفاتورة أو اسم العميل" class="w-full p-2 border rounded text-right text-sm" />
    </div>
    <div id="invoicesList" class="space-y-2 text-right"></div>
  `;
  document.getElementById('newInvoiceBtn').addEventListener('click', ()=> openInvoiceModal());
  document.getElementById('invoiceSearch').addEventListener('input', renderInvoicesList);
  renderInvoicesList();
}

function renderInvoicesList(){
  const q = document.getElementById('invoiceSearch').value.trim().toLowerCase();
  const list = state.invoices.filter(i=> i.number.toLowerCase().includes(q) || (i.customerName||'').toLowerCase().includes(q));
  const container = document.getElementById('invoicesList');
  if(list.length===0){ container.innerHTML = '<div class="p-3 text-slate-500">لا توجد فواتير</div>'; return; }
  container.innerHTML = list.slice().reverse().map(inv=>`
    <div class="p-3 border rounded flex justify-between items-center">
      <div class="text-right">
        <div class="font-medium">فاتورة ${inv.number}</div>
        <div class="text-xs text-slate-500">${inv.customerName || 'عميل نقدي'} — ${new Date(inv.date).toLocaleString()}</div>
      </div>
      <div class="flex gap-2">
        <button class="view-inv btn" data-id="${inv.id}">عرض</button>
        <button class="delete-inv btn" data-id="${inv.id}">حذف</button>
      </div>
    </div>
  `).join('');
  container.querySelectorAll('.view-inv').forEach(b=> b.addEventListener('click', e=> openInvoiceModal(e.target.dataset.id)));
  container.querySelectorAll('.delete-inv').forEach(b=> b.addEventListener('click', e=> { if(confirm('حذف الفاتورة؟')){ deleteInvoice(e.target.dataset.id); }}));
}

function newInvoiceNumber(){
  const last = state.invoices.slice(-1)[0];
  const datePart = new Date().toISOString().slice(0,10).replace(/-/g,'');
  const n = last ? (parseInt(last.serial || '0') + 1) : 1;
  return {number: `${datePart}-${String(n).padStart(4,'0')}`, serial: String(n)};
}

function openInvoiceModal(id=null){
  let inv = id ? JSON.parse(JSON.stringify(state.invoices.find(i=>i.id===id))) : null;
  if(!inv){ const nn = newInvoiceNumber(); inv = {id: null, number: nn.number, serial: nn.serial, date: new Date().toISOString(), customerId:null, customerName:'', items:[], total:0}; }

  const html = `
    <div class="fixed inset-0 bg-black/30 flex items-start md:items-center justify-center z-50 overflow-auto py-8">
      <div class="bg-white p-4 rounded w-full max-w-3xl text-right">
        <h3 class="font-medium mb-2">فاتورة ${inv.number}</h3>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-2 mb-2">
          <div class="md:col-span-2">
            <label class="text-xs">اختر عميل</label>
            <select id="inv_customer" class="w-full p-2 border rounded text-right">
              <option value="">عميل نقدي</option>
              ${state.customers.map(c=>`<option value="${c.id}" ${c.id===inv.customerId? 'selected':''}>${escapeHtml(c.name)}</option>`).join('')}
            </select>
          </div>
          <div>
            <label class="text-xs">التاريخ</label>
            <input id="inv_date" type="datetime-local" class="w-full p-2 border rounded text-right" value="${inv.date.slice(0,16)}" />
          </div>
        </div>

        <div class="mb-2">
          <h4 class="font-medium mb-1">العناصر</h4>
          <div class="grid grid-cols-1 md:grid-cols-4 gap-2 mb-2">
            <select id="line_product" class="p-2 border rounded text-right md:col-span-2">
              <option value="">-- اختر منتج --</option>
              ${state.products.map(p=>`<option value="${p.id}">${escapeHtml(p.name)} — ${p.price.toFixed(2)}</option>`).join('')}
            </select>
            <input id="line_qty" type="number" step="1" min="1" value="1" class="p-2 border rounded text-right" placeholder="الكمية" />
            <input id="line_price" type="number" step="0.01" class="p-2 border rounded text-right" placeholder="السعر" />
            <button id="addLineBtn" class="bg-indigo-600 text-white rounded px-3 py-1 md:col-span-4">إضافة للسطر</button>
          </div>
          <div id="linesContainer" class="space-y-2"></div>
        </div>

        <div class="flex justify-between items-center mt-3">
          <div class="text-right">
            <div class="text-slate-600 text-sm">المجموع</div>
            <div id="inv_total" class="text-2xl font-semibold">${inv.total.toFixed(2)}</div>
          </div>
          <div>
            <button id="saveInv" class="bg-green-600 text-white px-3 py-1 rounded">حفظ الفاتورة</button>
            <button id="cancelInv" class="px-3 py-1 rounded">إغلاق</button>
          </div>
        </div>
      </div>
    </div>
  `;

  const wrapper = document.createElement('div'); wrapper.innerHTML = html; document.body.appendChild(wrapper);
  const linesContainer = wrapper.querySelector('#linesContainer');

  function refreshLines(){
    linesContainer.innerHTML = inv.items.map((it,idx)=>`
      <div class=\"p-2 border rounded flex justify-between items-center\">
        <div class=\"text-right\"><div class=\"font-medium\">${escapeHtml(it.name)}</div><div class=\"text-xs text-slate-500\">${it.qty} × ${it.price.toFixed(2)}</div></div>
        <div class=\"flex gap-2\"><button class=\"rm-line btn\" data-i=\"${idx}\">حذف</button></div>
      </div>
    `).join('');
    wrapper.querySelectorAll('.rm-line').forEach(b=> b.addEventListener('click', e=>{ inv.items.splice(Number(e.target.dataset.i),1); calcTotal(); refreshLines(); }));
  }

  function calcTotal(){ inv.total = inv.items.reduce((s,it)=> s + it.qty*it.price, 0); wrapper.querySelector('#inv_total').innerText = inv.total.toFixed(2); }

  // pre-load lines if exist
  if(inv.items.length) refreshLines(); calcTotal();

  // interactions
  wrapper.querySelector('#line_product').addEventListener('change', function(){
    const pid = this.value; const p = state.products.find(x=>x.id===pid); wrapper.querySelector('#line_price').value = p ? p.price : '';
  });
  wrapper.querySelector('#addLineBtn').addEventListener('click', ()=>{
    const pid = wrapper.querySelector('#line_product').value;
    const qty = parseFloat(wrapper.querySelector('#line_qty').value) || 1;
    const price = parseFloat(wrapper.querySelector('#line_price').value) || 0;
    let name = 'منتج مخصص';
    if(pid){ const p = state.products.find(x=>x.id===pid); if(p) name = p.name; }
    inv.items.push({productId: pid||null, name, qty, price});
    refreshLines(); calcTotal();
  });

  wrapper.querySelector('#cancelInv').addEventListener('click', ()=> wrapper.remove());
  wrapper.querySelector('#saveInv').addEventListener('click', ()=>{
    inv.date = new Date(wrapper.querySelector('#inv_date').value).toISOString();
    inv.customerId = wrapper.querySelector('#inv_customer').value || null;
    inv.customerName = inv.customerId ? (state.customers.find(c=>c.id===inv.customerId)?.name || '') : '';
    if(!inv.items.length){ alert('أضف عناصر للفاتورة'); return; }
    if(!inv.id){ inv.id = uid('inv'); state.invoices.push(inv); } else {
      const idx = state.invoices.findIndex(x=>x.id===inv.id); state.invoices[idx] = inv;
    }
    saveState(); setView('sales'); wrapper.remove();
  });
}
function deleteInvoice(id){ state.invoices = state.invoices.filter(i=>i.id!==id); saveState(); renderInvoicesList(); }

// ========== تقارير ==========
function renderReports(){
  const salesByProduct = {};
  state.invoices.forEach(inv=> inv.items.forEach(it=>{ salesByProduct[it.name] = (salesByProduct[it.name]||0) + it.qty*it.price; }));
  const rows = Object.entries(salesByProduct).map(([name,amt])=> `<div class=\"p-2 border rounded flex justify-between\"><div>${escapeHtml(name)}</div><div>${amt.toFixed(2)}</div></div>`).join('');
  contentArea.innerHTML = `
    <h2 class="text-xl font-medium mb-3">تقارير</h2>
    <div class="mb-3">
      <h3 class="font-medium mb-1">مبيعات حسب منتج</h3>
      <div class="space-y-2">${rows || '<div class="text-slate-500 p-2">لا توجد بيانات</div>'}</div>
    </div>
  `;
}

// ===== أدوات تصدير/استيراد =====
document.getElementById('exportBtn').addEventListener('click', ()=>{
  const blob = new Blob([JSON.stringify(state, null, 2)], {type:'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a'); a.href = url; a.download = 'sales-data.json'; a.click(); URL.revokeObjectURL(url);
});

document.getElementById('importBtn').addEventListener('click', ()=> document.getElementById('fileInput').click());
document.getElementById('fileInput').addEventListener('change', function(){
  const f = this.files[0]; if(!f) return; const reader = new FileReader(); reader.onload = e=>{ try{ const data = JSON.parse(e.target.result); if(confirm('استبدال البيانات الحالية بالبيانات المستوردة؟')){ state = data; saveState(); setView('dashboard'); alert('تم الاستيراد'); } }catch(err){ alert('خطأ في الملف'); } }; reader.readAsText(f);
});

// ===== Utilities =====
function escapeHtml(s){ return (s||'').replaceAll('&','&amp;').replaceAll('<','&lt;').replaceAll('>','&gt;').replaceAll('"','&quot;'); }

// buttons small style
const style = document.createElement('style'); style.innerHTML = `.btn{background:#f3f4f6;padding:6px 10px;border-radius:6px;font-size:13px}.btn:hover{background:#e2e8f0}`; document.head.appendChild(style);

// init
loadState(); if(!state.products.length && !state.customers.length && !state.invoices.length){
  // sample data
  state.products.push({id: uid('prod'), name:'قلم حبر', code:'P001', price:1.5, notes:''});
  state.products.push({id: uid('prod'), name:'دفتر ملاحظات', code:'P002', price:3.25, notes:''});
  state.customers.push({id: uid('cust'), name:'شركة ABC', phone:'', email:'', notes:''});
  saveState();
}
setView('dashboard');

</script>
</body>
</html>
